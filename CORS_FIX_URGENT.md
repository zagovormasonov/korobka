# üö® –°–†–û–ß–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï CORS

## –ü—Ä–æ–±–ª–µ–º–∞
```
Access to fetch at 'https://korobka-1.onrender.com/api/tests/primary/questions' from origin 'https://idenself.com' has been blocked by CORS policy
```

–°–µ—Ä–≤–µ—Ä API –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –¥–æ–º–µ–Ω–∞ `idenself.com`.

## –†–µ—à–µ–Ω–∏–µ

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –≤ `server/index.js`:
   - –í—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ –¥–æ–º–µ–Ω—ã (`origin: true`)
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏

2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è NODE_ENV** –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Render:
   - `render.yaml`: `NODE_ENV=production`
   - `render-fast.yaml`: `NODE_ENV=production`

3. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### üìù –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `origin: true`, —á—Ç–æ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å–æ –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤. –≠—Ç–æ **–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ä–∞** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

## üöÄ –ù–ï–û–ë–•–û–î–ò–ú–´–ï –î–ï–ô–°–¢–í–ò–Ø

### 1. –°–†–û–ß–ù–´–ô –î–ï–ü–õ–û–ô (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
**–°–¥–µ–ª–∞–π—Ç–µ –¥–µ–ø–ª–æ–π —Å –Ω–æ–≤—ã–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏:**

1. –ó–∞–π–¥–∏—Ç–µ –≤ [Render Dashboard](https://dashboard.render.com/)
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å
3. **Manual Deploy** ‚Üí **Deploy latest commit**
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏

### 2. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω–æ):
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤—Ä—É—á–Ω—É—é (`Access-Control-Allow-Origin: *`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ preflight OPTIONS –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π endpoint `/api/test-cors`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

#### A) –¢–µ—Å—Ç–æ–≤—ã–π endpoint:
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://korobka-1.onrender.com/api/test-cors`
–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å `"success": true`

#### B) –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://idenself.com`
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç
4. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
```
üåê API Request: GET https://korobka-1.onrender.com/api/tests/primary/questions
üåê Current origin: https://idenself.com
üåê Response status: 200
```

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ Render
–í –ª–æ–≥–∞—Ö Render –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:
```
üöÄ Starting server with CORS configuration...
üì• GET /api/tests/primary/questions from origin: https://idenself.com
‚úÖ Handling preflight OPTIONS request
```

## ‚ö†Ô∏è –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥—É—é CORS –ø–æ–ª–∏—Ç–∏–∫—É –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

## üîÑ –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —á–µ—Ä–µ–∑ Render Dashboard.
