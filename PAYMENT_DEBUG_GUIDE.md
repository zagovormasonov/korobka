# –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–±—Ä–æ—Å–æ–º –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø (–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç).

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–ª–∞—Ç–µ–∂–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: `FRONTEND_URL` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Render.com
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `RENDER_EXTERNAL_URL` —Å fallback –Ω–∞ `https://idenself.com`

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–∞—à–±–æ—Ä–¥–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: `dashboard_token` –∏ `dashboard_password` –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å Supabase
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–ª–æ–Ω–∫–∏ `dashboard_token` –∏ `dashboard_password` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- **–†–µ—à–µ–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –∏–∑ `supabase/migration_add_missing_columns.sql`

## üîß –®–∞–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Render.com

–û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥–∏ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –∏ –Ω–∞–π–¥–∏—Ç–µ:

```
üîç –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞ –¥–ª—è sessionId: [sessionId]
‚úÖ –î–∞–Ω–Ω—ã–µ –Ω–∞–π–¥–µ–Ω—ã: {
  session_id: "...",
  email: "...",
  has_dashboard_token: true/false,
  has_dashboard_password: true/false
}
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12) –∏ –Ω–∞–π–¥–∏—Ç–µ:

```
üîç –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥–∞ –¥–ª—è sessionId: [sessionId]
üì• –û—Ç–≤–µ—Ç –æ—Ç API: {success: true, data: {...}}
‚úÖ –¢–æ–∫–µ–Ω –¥–∞—à–±–æ—Ä–¥–∞ –ø–æ–ª—É—á–µ–Ω: [token]
üöÄ –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∞—à–±–æ—Ä–¥, —Ç–æ–∫–µ–Ω: [token]
üîó URL –¥–∞—à–±–æ—Ä–¥–∞: /lk/[token]
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Render.com —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `RENDER_EXTERNAL_URL` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è Render.com)
- `SUPABASE_URL`
- `SUPABASE_SERVICE_ROLE_KEY`

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor:

```sql
SELECT 
    table_name,
    column_name,
    data_type
FROM information_schema.columns 
WHERE table_name = 'primary_test_results'
ORDER BY ordinal_position;
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∏:
- `dashboard_token`
- `dashboard_password`

## üöÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω URL –ø–ª–∞—Ç–µ–∂–∞
```javascript
SuccessURL: `${process.env.RENDER_EXTERNAL_URL || process.env.FRONTEND_URL || 'https://idenself.com'}/payment-success?sessionId=${sessionId}`
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í `PaymentSuccessPage.tsx` - –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
- –í `server/routes/tests.js` - –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –í `server/routes/payments.js` - –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è URL –ø–ª–∞—Ç–µ–∂–∞

### 3. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞
- –£–ª—É—á—à–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è Supabase (`migration_add_missing_columns.sql`)
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ Render.com
- [ ] –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å–ø–µ—à–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- [ ] –õ–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" –∞–∫—Ç–∏–≤–Ω–∞
- [ ] –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/lk/[token]` —Ä–∞–±–æ—Ç–∞–µ—Ç

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - –Ω–∞–π–¥–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—à–∏–±–∫—É
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–æ—É—Ç–∏–Ω–≥** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `/lk/:token` —Ä–∞–±–æ—Ç–∞–µ—Ç

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:
1. –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ —Å –æ—à–∏–±–∫–∞–º–∏
2. –õ–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (Console)
3. –°–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
4. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ–π
